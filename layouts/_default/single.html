{{- define "main" }}

{{/* Include custom TOC for posts */}}

<div id="post-container" class="post-container">
  {{- if (.Param "ShowToc") }}
  <aside id="toc-sidebar" class="toc-sidebar">
    {{- partial "toc.html" . }}
  </aside>
  {{- end }}
  <main id="post-main" class="post-main">
    <article class="post-single">
      <header class="post-header">
        {{ partial "breadcrumbs.html" . }}
        <h1 class="post-title entry-hint-parent">
          {{ .Title }}
          {{- if .Draft }}
          <span class="entry-hint" title="Draft">
            <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" fill="currentColor">
              <path
                d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
            </svg>
          </span>
          {{- end }}
        </h1>
        {{- if .Description }}
        <div class="post-description">
          {{ .Description }}
        </div>
        {{- end }}
        {{- if not (.Param "hideMeta") }}
        <div class="post-meta">
          {{- partial "post_meta.html" . -}}
          {{- partial "translation_list.html" . -}}
          {{- partial "edit_post.html" . -}}
          {{- partial "post_canonical.html" . -}}
        </div>
        {{- end }}
        {{- $tags := .Language.Params.Taxonomies.tag | default "tags" }}
        {{- if .GetTerms $tags }}
        <div class="post-tags-header">
          <strong>Tags:</strong>
          {{- range $i, $tag := (.GetTerms $tags) }}
            {{- if $i }} â€¢ {{ end }}
            <a href="{{ $tag.Permalink }}">{{ $tag.LinkTitle }}</a>
          {{- end }}
        </div>
        {{- end }}
      </header>
      {{- $isHidden := (.Param "cover.hiddenInSingle") | default (.Param "cover.hidden") | default false }}
      {{- partial "cover.html" (dict "cxt" . "IsSingle" true "isHidden" $isHidden) }}

      {{- if .Content }}
      <div class="post-content">
        {{- if not (.Param "disableAnchoredHeadings") }}
        {{- partial "anchored_headings.html" .Content -}}
        {{- else }}{{ .Content }}{{ end }}
      </div>
      {{- end }}

      {{/* Newsletter Subscription (post footer) */}}
        {{- $provider := (index .Site.Params "newsletter").provider }}
        {{- if and (eq $provider "buttondown") (not (eq .File.Path "about.md")) }}
        {{- $newsletterHandle := (index .Site.Params "newsletter").handle }}
        <h3 style="text-align: center; margin-bottom: 1rem;">Subscribe to stay updated and get notified when new posts are published</h3>
        <div class="header-subscribe post-subscribe" style="margin: 2rem auto 2rem; width: 100%; max-width: 560px; padding: 10px 12px; border-radius: 10px; text-align: center;">
          <form
            action="https://buttondown.email/api/emails/embed-subscribe/{{ $newsletterHandle }}"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://buttondown.email/{{ $newsletterHandle }}', 'popupwindow')"
            class="embeddable-buttondown-form">
            <span class="subscribe-text">ðŸ“§ Subscribe to new posts by email:</span>
            <input type="email" name="email" placeholder="you@example.com" required class="subscribe-input">
            <input type="hidden" value="1" name="embed"/>
            <button type="submit" class="subscribe-button">Subscribe</button>
          </form>
        </div>
        {{- end }}

      <footer class="post-footer">
        {{- $tags := .Language.Params.Taxonomies.tag | default "tags" }}
        <ul class="post-tags">
          {{- range ($.GetTerms $tags) }}
          <li><a href="{{ .Permalink }}">{{ .LinkTitle }}</a></li>
          {{- end }}
        </ul>
        {{- if (.Param "ShowPostNavLinks") }}
        {{- partial "post_nav_links.html" . }}
        {{- end }}
        {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }}
        {{- partial "share_icons.html" . -}}
        {{- end }}
      </footer>


      {{/* DEBUG comments param: {{ .Param "comments" }} | has giscus: {{ if site.Params.giscus }}yes{{ else }}no{{ end }} */}}
      {{- if (.Param "comments") }}
      {{- partial "comments.html" . }}
      {{- else }}
      <div data-debug="comments=false"></div>
    {{- end }}

      {{/* Add about section to all single posts except the about page */}}
      {{- if not (eq .File.Path "about.md") }}
      <div class="post-about">
        <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--border);">
        <h2>About the Author</h2>
        <div style="display: flex; flex-direction: column; gap: 1rem;">
          <img src="{{ "images/profile.jpg" | relURL }}" alt="Lasse Benninga" width="200" style="border-radius: 50%;" />
          <div>
            <p>I'm Lasse, a Data & Analytics Engineer with 7+ years of experience building data platforms and automation pipelines across AWS, GCP, and Azure. I've worked with companies like KLM Royal Dutch Airlines, Vattenfall, and Felyx, where I've architected and implemented scalable data solutions using everything from managing cloud infrastructure with Terraform to building data warehouses with Snowflake and dbt.</p>
            <p>I believe building robust CI/CD pipelines and automation solutions is essential for streamlining development, reducing debugging time, and saving costs for clients. This blog focuses on practical guides and automation patterns across data engineering and devops, with concise write-ups featuring reproducible steps and code.</p>
            <p>You can find more of my work on <a href="https://github.com/lassebenni" target="_blank" rel="noopener noreferrer">GitHub</a> or connect with me on <a href="https://www.linkedin.com/in/lasse-benninga-a462b194/" target="_blank" rel="noopener noreferrer">LinkedIn</a>.</p>
          </div>
{{ partial "ae_book_promo.html" . }}
        </div>
      </div>
      {{- end }}
      </article>
    </main>
  </div>

{{- end }}{{/* end main */}}