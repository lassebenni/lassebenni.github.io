/* =====================================================
   POST PAGE LAYOUT WITH TOC
   ===================================================== */


/* Ultra-tight main content padding for modern layout - only for blog posts */
#post-main {
    padding: 4px var(--gap) 8px var(--gap);
    margin: 0 auto;
}

/* Specific styling for post body text - removed broad rule that affected all pages */

/* Ensure posts expand the main wrapper to 1200px total (var --main-width + 2*--gap) */
/* Use a broad selector without :has() to avoid compatibility issues */
body:not(.list) {
    --main-width: calc(1200px - var(--gap) * 2);
}

/* Flexbox for post container to align main content and ToC */
.post-container {
    display: flex;
    justify-content: space-between; /* Place main content and ToC at edges */
    align-items: flex-start; /* Align items to the top */
    gap: var(--gap); /* Space between main content and ToC */
}

#post-main {
    flex: 1 1 auto; /* Allow main content to grow within .main cap */
}

#toc-sidebar {
    flex-shrink: 0; /* Prevent ToC from shrinking */
    width: 300px; /* Fixed width for ToC */
    position: sticky; /* Make ToC sticky */
    top: var(--header-height); /* Stick below the header */
    padding-top: var(--gap); /* Add some padding at the top */
}

/* Navigation spacing - centered and clean */
.nav {
    margin-bottom: 0;
}

/* Target only post pages that use the post container structure (excludes About) */
/* Explicitly enforce article wrapper width on posts (overrides theme) */
body:not(.list) .main {
    max-width: 1200px !important;
    margin: 0 auto !important;
    width: 100% !important;
}

/* Target the post container and its children */
#post-container {
    /* Follow .main cap; container itself should not expand beyond it */
    width: 100%;
    margin: 0 auto;
    padding: 0; /* let .main padding provide the outer spacing */
}

/* Main content area in posts */
#post-main {
    /* In flex layout, let #post-main shrink next to the 300px TOC */
    margin: 0 !important;
    padding: 0 !important;
    min-width: 0;         /* prevents long code blocks from forcing overflow */
}

/* Ensure the article content takes full width */
#post-main .post-single {
    max-width: 100% !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Search container styling */
.search-container input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.1);
}

/* Offset anchored headings so sticky compact header doesn't cover them */
.post-single h1,
.post-single h2,
.post-single h3,
.post-single h4,
.post-single h5,
.post-single h6 {
    scroll-margin-top: 72px;
}
/* Anchor offset for sticky header to prevent headings from being hidden */
.post-single h1,
.post-single h2,
.post-single h3,
.post-single h4,
.post-single h5,
.post-single h6,
.post-content h1[id],
.post-content h2[id],
.post-content h3[id],
.post-content h4[id],
.post-content h5[id],
.post-content h6[id] {
  scroll-margin-top: 88px; /* enough for compact header + small gap */
}